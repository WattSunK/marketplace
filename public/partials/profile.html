<!-- /public/partials/profile.html -->
<section class="ws-admin-section" id="ws-profile-root">
  <!-- Header card -->
  <div class="settings-card" style="display:flex; align-items:center; gap:16px; padding:18px 22px; margin-bottom:14px;">
    <div id="userAvatar"
         style="width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;
                font-weight:800;font-size:20px;color:#000;background:#fadb14; user-select:none;">
      U
    </div>
    <div style="line-height:1.3">
      <div style="display:flex;align-items:center;gap:10px;">
        <h3 id="userName" style="margin:0;font-size:18px;">User Name</h3>
        <span id="userRole"
              style="background:#d9f7be;color:#389e0d;font-weight:700;font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid #c2f0a2;">
          Customer
        </span>
      </div>
      <div id="userEmail" style="font-size:14px;color:#666;">user@example.com</div>
      <div id="lastLogin" style="font-size:13px;color:#999;">Last login: â€”</div>
    </div>
  </div>

  <!-- Profile form card -->
  <div class="settings-card">
    <div class="account-section-title">My Account</div>

    <label for="pf-name">Name</label>
    <input id="pf-name" type="text" class="settings-input" autocomplete="name" />

    <label for="pf-email">Email</label>
    <input id="pf-email" type="email" class="settings-input" autocomplete="email" />

    <label for="pf-phone">Phone</label>
    <input id="pf-phone" type="tel" class="settings-input" autocomplete="tel" />

    <div style="display:flex; align-items:center; justify-content:space-between; margin-top:8px;">
      <label>Password</label>
      <a href="/reset-password.html" class="order-link">Change Password &gt;</a>
    </div>

    <div style="display:flex; gap:12px; margin-top:10px;">
      <button class="settings-btn" id="btnSave">Save Changes</button>
      <button class="settings-btn settings-btn-cancel" id="btnCancel" type="button">Cancel</button>
    </div>

    <div style="margin-top:14px;">
      <button class="danger-btn" id="btnDeactivate" type="button">Deactivate Account</button>
    </div>
  </div>

<!-- Task0: Visual morph to Dispatch-style card layout (non-destructive) -->
<style>
  .ws-card { background:#fff; border:1px solid #e5e7eb; border-radius:14px; box-shadow:0 2px 10px rgba(17,24,39,.06); }
  .ws-card > .ws-header { padding:14px 16px; border-bottom:1px solid #e5e7eb; font-weight:600; }
  .ws-card > .ws-body { padding:14px 16px; }
</style>
<script>
(function(){
  const PARTIAL_ID = 'profile';
  const TITLE_FALLBACK = 'Profile';
  let applied = false;
  function wrap(el, cls){ const w=document.createElement('div'); w.className=cls; el.parentNode.insertBefore(w, el); w.appendChild(el); return w; }
  function morph(){ 
    if (applied) return; applied = true;
    const root = document.currentScript.parentElement || document.body;
    const titleEl = root.querySelector('h1, h2, .page-title, .card-header');
    const titleText = (titleEl ? titleEl.textContent.trim() : TITLE_FALLBACK);
    const card = document.createElement('section'); card.className='ws-card card';
    const header = document.createElement('div'); header.className='ws-header card-header'; header.textContent = titleText;
    const body = document.createElement('div'); body.className='ws-body card-body';
    const kids = Array.from(root.childNodes);
    kids.forEach(n=>{ if(n===document.currentScript) return;
                       if(n.nodeType===1 && n.tagName==='SCRIPT') return;
                       if(titleEl && n===titleEl) return;
                       body.appendChild(n); });
    const tb = body.querySelector('.toolbar, .items-toolbar, .ws-admin-toolbar, .status-toolbar, .filters, .filters-bar');
    if (tb) { tb.classList.add('filters-bar'); if(!tb.querySelector('.spacer')){const sp=document.createElement('div'); sp.className='spacer'; tb.appendChild(sp);} }
    const table = body.querySelector('table'); if(table && !table.closest('.table-wrap')) wrap(table, 'table-wrap');
    ['ordersPager','users-pagination','items-pagination'].forEach(id=>{ const pg=body.querySelector('#'+id); if(pg) pg.classList.add('pager'); });
    card.appendChild(header); card.appendChild(body);
    root.innerHTML=''; root.appendChild(card);
  }
  window.addEventListener('admin:partial-loaded', e=>{ if(e.detail && e.detail.id===PARTIAL_ID) morph(); });
  setTimeout(morph, 0);
})();
</script>
</section>
