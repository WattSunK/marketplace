<!-- Settings (page header) -->
<section class="card">
  <div class="card-header">Settings</div>
  <div class="card-body">
    <div class="filters-bar settings-toolbar">
      <div class="group">
        <label>Settings</label>
        <span style="font-size:12px;color:#6b7280;">Admin</span>
      </div>
      <div class="spacer"></div>
      <button id="btnSettingsRefresh" class="btn small">Refresh</button>
    </div>
    <div id="settingsIntro" style="color:#6b7280;">
      Configure your company information, user management, notifications, integrations, appearance, and system controls.
    </div>
  </div>
</section>

<!-- Settings cards grid -->
<div class="dash-cards">

  <!-- Company Information -->
  <section class="card">
    <div class="card-header">Company Information</div>
    <div class="card-body">
      <label for="companyName"><strong>Company Name</strong></label>
      <input id="companyName" type="text" class="input" value="WattSun Solar" />

      <div style="height:10px"></div>
      <label for="supportEmail"><strong>Support Email</strong></label>
      <input id="supportEmail" type="email" class="input" value="support@wattsun.co.ke" />

      <div style="height:10px"></div>
      <label for="supportPhone"><strong>Support Phone</strong></label>
      <input id="supportPhone" type="tel" class="input" value="+254700123456" />

      <div style="height:10px"></div>
      <label for="physicalAddress"><strong>Physical Address</strong></label>
      <input id="physicalAddress" type="text" class="input" value="Nairobi, Kenya" />
    </div>
  </section>

  <!-- User Management -->
  <section class="card">
    <div class="card-header">User Management</div>
    <div class="card-body">
      <label style="display:flex;align-items:center;gap:8px;">
        <input id="enforceStrongPw" type="checkbox" /> Enforce strong passwords
      </label>

      <div style="height:10px"></div>
      <label for="sessionTimeout"><strong>Session Timeout</strong></label>
      <select id="sessionTimeout" class="input">
        <option>15 minutes</option>
        <option>30 minutes</option>
        <option selected>1 hour</option>
        <option>2 hours</option>
        <option>8 hours</option>
      </select>

      <div style="height:10px"></div>
      <label style="display:flex;align-items:center;gap:8px;">
        <input id="allowPwReset" type="checkbox" /> Allow Password Reset
      </label>
    </div>
  </section>

  <!-- Notifications -->
  <section class="card">
    <div class="card-header">Notifications</div>
    <div class="card-body">
      <label style="display:flex;align-items:center;gap:8px;">
        <input id="notifOrderPlaced" type="checkbox" checked /> Order Placed Email
      </label>

      <div style="height:8px"></div>
      <label style="display:flex;align-items:center;gap:8px;">
        <input id="notifOrderDelivered" type="checkbox" checked /> Order Delivered Email
      </label>

      <div style="height:12px"></div>
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
        <label style="display:flex;align-items:center;gap:8px;margin-bottom:4px;">
          <input id="notifLowStock" type="checkbox" checked /> Low Stock Alerts
        </label>
        <label for="lowStockThreshold" style="display:flex;align-items:center;gap:6px;">
          <input id="lowStockThreshold" class="input" type="number" min="1" value="10" style="width:80px" />
          <span>threshold</span>
        </label>
      </div>

      <div style="height:10px"></div>
      <label for="notifEmailTo"><strong>Send notifications to</strong></label>
      <input id="notifEmailTo" type="email" class="input" value="alerts@wattsun.co.ke" />
    </div>
  </section>

  <!-- Integrations -->
  <section class="card">
    <div class="card-header">Integrations</div>
    <div class="card-body">
      <label for="paybill"><strong>Paybill Number</strong></label>
      <input id="paybill" type="text" class="input" value="123456" />

      <div style="height:10px"></div>
      <label for="apiKey"><strong>API Key</strong></label>
      <input id="apiKey" type="password" class="input" value="********" />

      <div style="height:10px"></div>
      <label for="smsGateway"><strong>SMS Gateway</strong></label>
      <select id="smsGateway" class="input">
        <option selected>Africa's Talking</option>
        <option>Twilio</option>
        <option>Infobip</option>
      </select>

      <div style="height:10px"></div>
      <label for="smsSenderId"><strong>Sender ID</strong></label>
      <input id="smsSenderId" type="text" class="input" value="WattSun" />
    </div>
  </section>

  <!-- Appearance -->
  <section class="card">
    <div class="card-header">Appearance</div>
    <div class="card-body">
      <label for="logoUpload"><strong>Logo Upload</strong></label>
      <input id="logoUpload" type="file" class="input" />

      <div style="height:10px"></div>
      <label for="themeSelect"><strong>Theme</strong></label>
      <select id="themeSelect" class="input">
        <option selected>Light</option>
        <option>Dark</option>
        <option>System</option>
      </select>

      <div class="actions">
        <button id="btnSaveAppearance" class="btn">Save</button>
      </div>
    </div>
  </section>

  <!-- System Controls -->
  <section class="card">
    <div class="card-header">System Controls</div>
    <div class="card-body">
      <div class="actions" style="gap:10px">
        <button id="btnBackup" class="btn">Backup Data</button>
        <label class="btn" for="restoreFile" style="cursor:pointer;">Restore from Backup</label>
        <input id="restoreFile" type="file" class="input" style="display:none" />
        <button id="btnExport" class="btn">Export Data</button>
      </div>
    </div>
  </section>

  <!-- Danger Zone -->
  <section class="card">
    <div class="card-header">Danger Zone</div>
    <div class="card-body">
      <style>
        .danger-note { color:#b91c1c; font-weight:600; }
        .btn-danger { background:#fef2f2; border:1px solid #fecaca; }
        .btn-danger:hover { background:#fee2e2; }
      </style>
      <p class="danger-note">Caution: these actions are irreversible.</p>
      <div class="actions" style="gap:10px">
        <button class="btn btn-danger" id="btnClearCache">Clear Server Cache</button>
        <button class="btn btn-danger" id="btnResetEmails">Reset Email Settings</button>
        <button class="btn btn-danger" id="btnDeleteTestData">Delete Test Data</button>
      </div>
    </div>
  </section>

</div>

<script>
  (function(){
    const confirmDo = (msg, fn) => { if (confirm(msg)) fn?.(); };

    document.getElementById('btnSettingsRefresh')?.addEventListener('click', () => location.reload());
    document.getElementById('btnSaveAppearance')?.addEventListener('click', () => alert('Appearance saved.'));
    document.getElementById('btnBackup')?.addEventListener('click', () => alert('Backup started.'));
    document.getElementById('restoreFile')?.addEventListener('change', (e) => {
      if (e.target.files?.length) alert('Restore uploaded: ' + e.target.files[0].name);
    });
    document.getElementById('btnExport')?.addEventListener('click', () => alert('Export started.'));

    document.getElementById('btnClearCache')?.addEventListener('click', () =>
      confirmDo('Clear server cache now?', () => console.log('[settings] clear cache'))
    );
    document.getElementById('btnResetEmails')?.addEventListener('click', () =>
      confirmDo('Reset email settings?', () => console.log('[settings] reset SMTP'))
    );
    document.getElementById('btnDeleteTestData')?.addEventListener('click', () =>
      confirmDo('Delete ALL test data? This cannot be undone.', () => console.log('[settings] delete test data'))
    );
  })();
</script>
